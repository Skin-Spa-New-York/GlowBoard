var e=Object.defineProperty,s=(s,a,t)=>(((s,a,t)=>{a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t})(s,"symbol"!=typeof a?a+"":a,t),t);import{j as a,c as t,a as r,C as i,b as n,d as c,e as l,B as o,I as d,S as m,f as x,g as h,h as u,i as g}from"./dashboard-features-d9d15042.js";import{j as b,U as p,k as j,l as f,m as y,n as N,E as w,S as v,o as _,q as E,r as S,M as U,s as A,t as F,u as k}from"./ui-vendor-ea3e37df.js";import{r as D}from"./react-vendor-b18ea2cb.js";import{i as L,g as C,a as I,o as O,q as T,c as M,w as $,b as B,d as R,G as z,s as P,e as G,f as J,h as V,T as q,j as K,u as H,k as W}from"./firebase-vendor-b3492e98.js";const Y=L({apiKey:"AIzaSyDKo06Dx1V7lIEG4LG8Gd1WjRhDHJHSaoc",authDomain:"tallymail.firebaseapp.com",projectId:"tallymail",storageBucket:"tallymail.firebasestorage.app",messagingSenderId:"212729064673",appId:"1:212729064673:web:8c082966575979a8d01ba0"}),Q=C(Y),X=I(Y),Z="error",ee="warn",se="info",ae="debug";const te=new class{constructor(){s(this,"isDevelopment"),s(this,"enableLogging"),this.isDevelopment=!1,this.enableLogging=!0}sanitizeData(e){if(!e)return e;const s=["password","token","apiKey","secret","key"];if("object"==typeof e){const a={...e};return s.forEach(e=>{a[e]&&(a[e]="[REDACTED]")}),a}return e}log(e,s,a){if(!this.enableLogging)return;(new Date).toISOString();const t=this.sanitizeData(a);this.isDevelopment||this.sendToErrorTracking(e,s,t)}sendToErrorTracking(e,s,a){try{const t={level:e,message:s,data:a,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href},r=JSON.parse(sessionStorage.getItem("app_logs")||"[]");r.push(t),r.length>50&&r.splice(0,r.length-50),sessionStorage.setItem("app_logs",JSON.stringify(r))}catch(t){}}error(e,s){this.log(Z,e,s)}warn(e,s){this.log(ee,e,s)}info(e,s){this.log(se,e,s)}debug(e,s){this.log(ae,e,s)}getLogs(){if(!this.isDevelopment)return[];try{return JSON.parse(sessionStorage.getItem("app_logs")||"[]")}catch{return[]}}clearLogs(){this.isDevelopment&&sessionStorage.removeItem("app_logs")}},re="salesRecords",ie="notes",ne="users",ce="auditLogs",le=e=>(null==e?void 0:e.toDate)?e.toDate().toISOString():(new Date).toISOString(),oe=e=>{const s=e.data();return{id:e.id,...s,created_at:le(s.created_at),updated_at:le(s.updated_at)}};class de{async list(){try{return(await R(M(Q,this.collectionName))).docs.map(oe)}catch(e){throw te.error(`Error fetching ${this.collectionName}`,e),new Error(`Failed to fetch ${this.collectionName}`)}}async get(e){try{const s=J(Q,this.collectionName,e),a=await V(s);if(!a.exists())throw new Error(`${this.collectionName} not found`);return oe(a)}catch(s){throw te.error(`Error fetching ${this.collectionName}`,s),s}}async create(e){try{const s=q.now(),a={...e,created_at:s,updated_at:s},t=await K(M(Q,this.collectionName),a),r=await V(t);return oe(r)}catch(s){throw te.error(`Error creating ${this.collectionName}`,s),new Error(`Failed to create ${this.collectionName}`)}}async update(e,s){try{const a=J(Q,this.collectionName,e),t={...s,updated_at:q.now()};await H(a,t);const r=await V(a);return oe(r)}catch(a){throw te.error(`Error updating ${this.collectionName}`,a),new Error(`Failed to update ${this.collectionName}`)}}async delete(e){try{const s=J(Q,this.collectionName,e);await W(s)}catch(s){throw te.error(`Error deleting ${this.collectionName}`,s),new Error(`Failed to delete ${this.collectionName}`)}}}const me=new class extends de{constructor(){super(...arguments),s(this,"collectionName",re)}async getByLocation(e){try{const s=T(M(Q,this.collectionName),$("location","==",e),B("date","desc"));return(await R(s)).docs.map(oe)}catch(s){throw te.error("Error fetching sales by location",s),new Error("Failed to fetch sales by location")}}async getByDateRange(e,s){try{const a=T(M(Q,this.collectionName),$("date",">=",e),$("date","<=",s),B("date","desc"));return(await R(a)).docs.map(oe)}catch(a){throw te.error("Error fetching sales by date range",a),new Error("Failed to fetch sales by date range")}}},xe=new class extends de{constructor(){super(...arguments),s(this,"collectionName",ie)}async getByLocation(e){try{const s=T(M(Q,this.collectionName),$("location","==",e),B("created_at","desc"));return(await R(s)).docs.map(oe)}catch(s){throw te.error("Error fetching notes by location",s),new Error("Failed to fetch notes by location")}}},he=new class extends de{constructor(){super(...arguments),s(this,"collectionName",ne)}async me(){return new Promise((e,s)=>{const a=O(X,async t=>{if(a(),t)try{const s=T(M(Q,this.collectionName),$("email","==",t.email)),a=await R(s);if(a.empty){const s=await this.isFirstUser(),a=await this.create({email:t.email,full_name:t.displayName||"",location:"Flatiron",is_admin:s});e(a)}else{const s=a.docs[0];e(oe(s))}}catch(r){s(r)}else s(new Error("Not authenticated"))})})}async login(){try{const e=new z,s=await P(X,e);if(!s.user.email)throw new Error("No email found in Google account");const a=T(M(Q,this.collectionName),$("email","==",s.user.email)),t=await R(a);if(t.empty){const e=await this.isFirstUser();return await this.create({email:s.user.email,full_name:s.user.displayName||"",location:"Flatiron",is_admin:e})}{const e=t.docs[0];return oe(e)}}catch(e){throw te.error("Error during login",e),new Error("Failed to login")}}async logout(){try{await G(X)}catch(e){throw te.error("Error during logout",e),new Error("Failed to logout")}}async getByEmail(e){try{const s=T(M(Q,this.collectionName),$("email","==",e)),a=await R(s);return a.empty?null:oe(a.docs[0])}catch(s){throw te.error("Error fetching user by email",s),new Error("Failed to fetch user by email")}}async isFirstUser(){try{return(await R(M(Q,this.collectionName))).empty}catch(e){return te.error("Error checking if first user",e),!1}}async promoteToAdmin(e){try{const s=await this.getByEmail(e);if(!s||!s.id)throw new Error("User not found");return await this.update(s.id,{is_admin:!0})}catch(s){throw te.error("Error promoting user to admin",s),new Error("Failed to promote user to admin")}}},ue=new class extends de{constructor(){super(...arguments),s(this,"collectionName",ce)}async logAction(e,s,a,t,r){try{const i=X.currentUser;if(!i)throw new Error("No authenticated user for audit log");const n={action_type:e,entity_type:s,entity_id:a,user_email:i.email,old_values:t||void 0,new_values:r||void 0,location:"System",details:`${e} performed on ${s}`,ip_address:"Unknown"};return await this.create(n)}catch(i){throw te.error("Error creating audit log",i),new Error("Failed to create audit log")}}},ge=e=>O(X,e),be=me,pe=xe,je=he,fe=r("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ye=D.forwardRef(({className:e,variant:s,...r},i)=>a.jsx("div",{ref:i,role:"alert",className:t(fe({variant:s}),e),...r}));ye.displayName="Alert";D.forwardRef(({className:e,...s},r)=>a.jsx("h5",{ref:r,className:t("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";const Ne=D.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:t("text-sm [&_p]:leading-relaxed",e),...s}));Ne.displayName="AlertDescription";class we{static async log(e,s,a,t,r){try{await ue.logAction(e,s,a,t,r)}catch(i){}}static async logSalesRecord(e,s,a,t){await this.log(e,"SalesRecord",s,a,t)}static async logNote(e,s,a,t){await this.log(e,"Note",s,a,t)}static async logUser(e,s,a,t){await this.log(e,"User",s,a,t)}static async logLogin(){await this.log("login","User","system",null,null)}static async logLogout(){await this.log("logout","User","system",null,null)}}function ve(){const[e,s]=D.useState(null),[a,t]=D.useState(!0),[r,i]=D.useState(null);D.useEffect(()=>{n()},[]);const n=async()=>{t(!0),i(null);try{const e=await je.me();s(e)}catch(e){i(e instanceof Error?e.message:"Failed to load user"),s(null)}finally{t(!1)}};return{user:e,loading:a,error:r,isAuthenticated:!!e,isAdmin:(null==e?void 0:e.is_admin)||!1,userLocation:null==e?void 0:e.location,logout:async()=>{try{await je.logout(),s(null)}catch(e){i(e instanceof Error?e.message:"Failed to logout")}},refetch:n}}const _e=["Flatiron","MidEast","Midtown","UWS","Back Bay","North Station","Miami Beach","eStore","Location 9","Location 10"],Ee=r("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Se({className:e,variant:s,...r}){return a.jsx("div",{className:t(Ee({variant:s}),e),...r})}function Ue(){const[e,s]=D.useState([]),[a,t]=D.useState(!0),[r,i]=D.useState(null);D.useEffect(()=>{n()},[]);const n=async()=>{t(!0),i(null);try{const e=await je.list();s(e)}catch(e){i(e instanceof Error?e.message:"Failed to load users"),s([])}finally{t(!1)}};return{users:e,loading:a,error:r,refetch:n,inviteUser:async e=>{try{const s=await je.create(e);return await we.logUser("user_created",s.id,null,e),await n(),s}catch(s){throw new Error(s instanceof Error?s.message:"Failed to invite user")}},updateUserAdmin:async(s,a)=>{try{const t=e.find(e=>e.id===s);if(!t)throw new Error("User not found");const r={...t,is_admin:a};await je.update(s,{is_admin:a}),await we.logUser("user_updated",s,t,r),await n()}catch(t){throw new Error(t instanceof Error?t.message:"Failed to update user privileges")}},updateUserLocation:async(s,a)=>{try{const t=e.find(e=>e.id===s);if(!t)throw new Error("User not found");const r={...t,location:a};await je.update(s,{location:a}),await we.logUser("user_updated",s,t,r),await n()}catch(t){throw new Error(t instanceof Error?t.message:"Failed to update user location")}},deleteUser:async s=>{try{const a=e.find(e=>e.id===s);if(!a)throw new Error("User not found");await je.delete(s),await we.logUser("delete",s,a,null),await n()}catch(a){throw new Error(a instanceof Error?a.message:"Failed to delete user")}}}}const Ae=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,loading:s}=ve(),{users:t,loading:r,updateUserAdmin:d}=Ue();return s||r?a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-[#bc9a64] border-t-transparent rounded-full animate-spin"})}):(null==e?void 0:e.is_admin)?a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] text-white p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[a.jsx(p,{className:"w-8 h-8 text-[#bc9a64]"}),"User Management"]}),a.jsx("p",{className:"text-gray-400",children:"Manage user accounts and permissions across all locations"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:t.length}),a.jsx("p",{className:"text-sm text-gray-400",children:"Total Users"})]}),a.jsx(p,{className:"w-8 h-8 text-[#bc9a64]"})]})})}),a.jsx(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(e=>e.is_admin).length}),a.jsx("p",{className:"text-sm text-gray-400",children:"Administrators"})]}),a.jsx(j,{className:"w-8 h-8 text-[#bc9a64]"})]})})}),a.jsx(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:a.jsx(n,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:new Set(t.map(e=>e.location).filter(Boolean)).size}),a.jsx("p",{className:"text-sm text-gray-400",children:"Active Locations"})]}),a.jsx(f,{className:"w-8 h-8 text-[#bc9a64]"})]})})})]}),a.jsxs(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[a.jsx(c,{children:a.jsx(l,{className:"text-white",children:"System Users"})}),a.jsxs(n,{children:[a.jsx("div",{className:"space-y-4",children:t.map(s=>{var t;return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#0e0e0e] rounded-lg border border-[#bc9a64]/10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#bc9a64]/20 to-[#bc9a64]/10 rounded-lg flex items-center justify-center",children:s.is_admin?a.jsx(j,{className:"w-6 h-6 text-[#bc9a64]"}):a.jsx("span",{className:"text-lg font-medium text-[#bc9a64]",children:(null==(t=s.full_name)?void 0:t[0])||s.email[0].toUpperCase()})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:s.full_name||"Unnamed User"}),a.jsx("p",{className:"text-sm text-gray-400",children:s.email}),s.location&&a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(f,{className:"w-3 h-3 text-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:s.location})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Se,{className:s.is_admin?"bg-[#bc9a64]/20 text-[#bc9a64] border-[#bc9a64]/30":"bg-gray-100 text-gray-800 border-gray-200",children:s.is_admin?"Administrator":"User"}),s.id!==e.id&&a.jsx(o,{variant:"outline",size:"sm",onClick:()=>s.id&&(async(e,s)=>{try{await d(e,!s)}catch(a){}})(s.id,s.is_admin),className:"border-[#bc9a64]/20 text-gray-300 hover:bg-[#bc9a64]/10 hover:text-white hover:border-[#bc9a64]/40",children:s.is_admin?"Remove Admin":"Make Admin"})]})]},s.id)})}),0===t.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(p,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No users found"})]})]})]}),a.jsxs(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[a.jsx(c,{children:a.jsx(l,{className:"text-white",children:"Instructions"})}),a.jsxs(n,{className:"text-gray-300 space-y-2",children:[a.jsx("p",{children:"• New users can be invited through the dashboard settings"}),a.jsx("p",{children:"• Regular users can only view and edit data for their assigned location"}),a.jsx("p",{children:"• Administrators have full access to all locations and user management"}),a.jsx("p",{children:"• You cannot remove admin privileges from your own account"})]})]})]})}):a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] text-white p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto mt-20",children:a.jsxs(ye,{className:"border-red-500/20 bg-red-500/10",children:[a.jsx(b,{className:"h-4 w-4 text-red-400"}),a.jsx(Ne,{className:"text-red-300",children:"Access denied. Only administrators can access user management."})]})})})}},Symbol.toStringTag,{value:"Module"}));const Fe=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,loading:s}=ve();return s?a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-[#bc9a64] border-t-transparent rounded-full animate-spin"})}):(null==e?void 0:e.is_admin)?a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] text-white p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[a.jsx(b,{className:"w-8 h-8 text-[#bc9a64]"}),"Audit Logs"]}),a.jsx("p",{className:"text-gray-400",children:"Complete audit trail of all system activities and changes"})]}),a.jsx(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:a.jsxs(n,{className:"p-12 text-center",children:[a.jsx(b,{className:"w-16 h-16 text-[#bc9a64] mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Audit Logs Coming Soon"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Comprehensive audit logging and reporting features are being developed and will be available in the next update."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(y,{className:"w-8 h-8 text-[#bc9a64] mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Activity Timeline"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(N,{className:"w-8 h-8 text-[#bc9a64] mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-300",children:"User Actions"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(w,{className:"w-8 h-8 text-[#bc9a64] mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Data Changes"})]})]})]})})]})}):a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] text-white p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto mt-20",children:a.jsxs(ye,{className:"border-red-500/20 bg-red-500/10",children:[a.jsx(b,{className:"h-4 w-4 text-red-400"}),a.jsx(Ne,{className:"text-red-300",children:"Access denied. Only administrators can view audit logs."})]})})})}},Symbol.toStringTag,{value:"Module"}));const ke=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,loading:s}=ve(),{users:t,loading:r,error:f,inviteUser:y,updateUserAdmin:N,updateUserLocation:w,deleteUser:L}=Ue(),[C,I]=D.useState(!1),[O,T]=D.useState({email:"",full_name:"",location:"",is_admin:!1}),[M,$]=D.useState(!1),[B,R]=D.useState({type:"",text:""}),[z,P]=D.useState(null);return s||r?a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-[#bc9a64] border-t-transparent rounded-full animate-spin"})}):(null==e?void 0:e.is_admin)?a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] text-white p-6",children:a.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[a.jsx(v,{className:"w-8 h-8 text-[#bc9a64]"}),"Settings & User Management"]}),a.jsx("p",{className:"text-gray-400",children:"Manage system settings, user accounts, and permissions"})]}),B.text&&a.jsxs(ye,{className:"success"===B.type?"border-green-500/20 bg-green-500/10":"border-red-500/20 bg-red-500/10",children:["success"===B.type?a.jsx(_,{className:"h-4 w-4 text-green-400"}):a.jsx(E,{className:"h-4 w-4 text-red-400"}),a.jsx(Ne,{className:"success"===B.type?"text-green-300":"text-red-300",children:B.text})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[a.jsx(c,{children:a.jsxs(l,{className:"text-white flex items-center gap-2",children:[a.jsx(S,{className:"w-5 h-5 text-[#bc9a64]"}),"Invite New User"]})}),a.jsx(n,{children:C?a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),O.location){$(!0),R({type:"",text:""});try{await y({email:O.email,full_name:O.full_name,location:O.location,is_admin:O.is_admin}),R({type:"success",text:`User ${O.full_name} has been successfully created and invited to join the system.`}),T({email:"",full_name:"",location:"",is_admin:!1}),I(!1)}catch(s){R({type:"error",text:s instanceof Error?s.message:"Failed to invite user. Please try again."})}$(!1)}else R({type:"error",text:"Please select a location for the user."})},className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Email Address"}),a.jsx(d,{type:"email",value:O.email,onChange:e=>T(s=>({...s,email:e.target.value})),className:"bg-[#0e0e0e] border-[#333] text-white focus:border-[#bc9a64]",placeholder:"user@example.com",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Full Name"}),a.jsx(d,{value:O.full_name,onChange:e=>T(s=>({...s,full_name:e.target.value})),className:"bg-[#0e0e0e] border-[#333] text-white focus:border-[#bc9a64]",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Location"}),a.jsxs(m,{value:O.location,onValueChange:e=>T(s=>({...s,location:e})),children:[a.jsx(x,{className:"bg-[#0e0e0e] border-[#333] text-white",children:a.jsx(h,{placeholder:"Select location"})}),a.jsx(u,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:_e.map(e=>a.jsx(g,{value:e,className:"text-white hover:bg-[#bc9a64]/10",children:e},e))})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"admin",checked:O.is_admin,onChange:e=>T(s=>({...s,is_admin:e.target.checked})),className:"rounded border-[#333]"}),a.jsx("label",{htmlFor:"admin",className:"text-sm text-gray-300",children:"Administrator privileges"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(o,{type:"button",variant:"outline",onClick:()=>I(!1),className:"flex-1 border-[#333] text-gray-300 hover:bg-[#333]/50",children:"Cancel"}),a.jsx(o,{type:"submit",disabled:M,className:"flex-1 bg-gradient-to-r from-[#bc9a64] to-[#d4b876] hover:from-[#a8875a] hover:to-[#c1a56b] text-[#0e0e0e] font-semibold",children:M?a.jsx("div",{className:"w-4 h-4 border-2 border-[#0e0e0e] border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(U,{className:"w-4 h-4 mr-2"}),"Send Invite"]})})]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx(p,{className:"w-12 h-12 text-[#bc9a64] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-6",children:"Add new team members to the system"}),a.jsxs(o,{onClick:()=>I(!0),className:"w-full bg-gradient-to-r from-[#bc9a64] to-[#d4b876] hover:from-[#a8875a] hover:to-[#c1a56b] text-[#0e0e0e] font-semibold",children:[a.jsx(S,{className:"w-4 h-4 mr-2"}),"Invite User"]})]})})]})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[a.jsx(c,{children:a.jsx(l,{className:"text-white flex items-center justify-between",children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(p,{className:"w-5 h-5 text-[#bc9a64]"}),"System Users (",t.length,")"]})})}),a.jsx(n,{children:f?a.jsxs(ye,{className:"border-red-500/20 bg-red-500/10",children:[a.jsx(E,{className:"h-4 w-4 text-red-400"}),a.jsx(Ne,{className:"text-red-300",children:f})]}):0===t.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(p,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No users found"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Start by inviting your first team member"})]}):a.jsx("div",{className:"space-y-4",children:t.map(s=>{var t;return a.jsxs("div",{className:"p-4 bg-[#0e0e0e] rounded-lg border border-[#bc9a64]/10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#bc9a64]/20 to-[#bc9a64]/10 rounded-lg flex items-center justify-center",children:s.is_admin?a.jsx(j,{className:"w-5 h-5 text-[#bc9a64]"}):a.jsx("span",{className:"text-sm font-medium text-[#bc9a64]",children:(null==(t=s.full_name)?void 0:t[0])||s.email[0].toUpperCase()})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-white",children:s.full_name||"Unnamed User"}),a.jsx("p",{className:"text-sm text-gray-400",children:s.email}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(Se,{variant:s.is_admin?"default":"secondary",className:s.is_admin?"bg-[#bc9a64] text-[#0e0e0e]":"bg-gray-700 text-gray-300",children:s.is_admin?"Admin":"User"}),s.location&&a.jsxs(Se,{variant:"outline",className:"border-[#bc9a64]/20 text-[#bc9a64]",children:[a.jsx(A,{className:"w-3 h-3 mr-1"}),s.location]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(o,{variant:"outline",size:"sm",onClick:()=>P(z===s.id?null:s.id),className:"border-[#bc9a64]/20 text-gray-300 hover:bg-[#bc9a64]/10",children:a.jsx(F,{className:"w-4 h-4"})}),s.id!==(null==e?void 0:e.id)&&a.jsx(o,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await L(e),R({type:"success",text:"User deleted successfully."})}catch(s){R({type:"error",text:s instanceof Error?s.message:"Failed to delete user."})}})(s.id),className:"border-red-500/20 text-red-400 hover:bg-red-500/10",children:a.jsx(k,{className:"w-4 h-4"})})]})]}),z===s.id&&a.jsx("div",{className:"mt-4 pt-4 border-t border-[#bc9a64]/10",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Location"}),a.jsxs(m,{value:s.location||"",onValueChange:e=>(async(e,s)=>{try{await w(e,s),R({type:"success",text:"User location updated successfully."})}catch(a){R({type:"error",text:a instanceof Error?a.message:"Failed to update user location."})}})(s.id,e),children:[a.jsx(x,{className:"bg-[#1a1a1a] border-[#333] text-white",children:a.jsx(h,{placeholder:"Select location"})}),a.jsx(u,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:_e.map(e=>a.jsx(g,{value:e,className:"text-white hover:bg-[#bc9a64]/10",children:e},e))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Admin Status"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(o,{variant:s.is_admin?"default":"outline",size:"sm",onClick:()=>(async(e,s)=>{try{await N(e,!s),R({type:"success",text:"User privileges updated successfully."})}catch(a){R({type:"error",text:a instanceof Error?a.message:"Failed to update user privileges."})}})(s.id,s.is_admin),className:s.is_admin?"bg-[#bc9a64] text-[#0e0e0e] hover:bg-[#a8875a]":"border-[#bc9a64]/20 text-gray-300 hover:bg-[#bc9a64]/10",disabled:s.id===(null==e?void 0:e.id),children:[a.jsx(b,{className:"w-4 h-4 mr-2"}),s.is_admin?"Remove Admin":"Make Admin"]}),s.id===(null==e?void 0:e.id)&&a.jsx("span",{className:"text-xs text-gray-500",children:"Cannot modify your own admin status"})]})]})]})})]},s.id)})})})]})})]}),a.jsxs(i,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[a.jsx(c,{children:a.jsx(l,{className:"text-white",children:"System Information"})}),a.jsxs(n,{className:"text-gray-300 space-y-2",children:[a.jsx("p",{children:"• Users can only access data for their assigned location"}),a.jsx("p",{children:"• Administrators have full access to all locations and system settings"}),a.jsx("p",{children:"• All user actions are logged for accountability and audit purposes"}),a.jsx("p",{children:"• New users will receive an email invitation to join the system"}),a.jsx("p",{children:"• Users authenticate using their Google account"})]})]})]})}):a.jsx("div",{className:"min-h-screen bg-[#0e0e0e] text-white p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto mt-20",children:a.jsxs(ye,{className:"border-red-500/20 bg-red-500/10",children:[a.jsx(b,{className:"h-4 w-4 text-red-400"}),a.jsx(Ne,{className:"text-red-300",children:"Access denied. Only administrators can access settings."})]})})})}},Symbol.toStringTag,{value:"Module"}));export{ye as A,Se as B,_e as L,pe as N,be as S,je as U,Ne as a,he as b,we as c,Ae as d,Fe as e,ke as f,te as l,ge as o,ve as u};
//# sourceMappingURL=admin-features-fcd29654.js.map
