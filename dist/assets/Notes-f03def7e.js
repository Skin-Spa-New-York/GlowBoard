import{j as e,B as a,C as t,d as s,e as l,b as i,S as r,f as n,g as c,h as o,i as d,I as m}from"./dashboard-features-d9d15042.js";import{r as x}from"./react-vendor-b18ea2cb.js";import{B as h,L as b,u,N as g,l as j,c as N}from"./admin-features-fcd29654.js";import{F as v,r as y,h as w,_ as f,X as p,y as C,l as M,t as _,u as D,i as L,q as S,$ as F}from"./ui-vendor-ea3e37df.js";import{T as k}from"./textarea-5d669d9c.js";import"./charts-vendor-c49a018f.js";import"./firebase-vendor-b3492e98.js";function T({isAdmin:t,userLocation:s,onNewNote:l}){return e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-[#bc9a64]"}),"Notes"]}),e.jsx("p",{className:"text-gray-400",children:t?"Manage notes for all locations":`Manage notes for ${s}`})]}),e.jsxs(a,{onClick:l,className:"bg-gradient-to-r from-[#bc9a64] to-[#d4b876] hover:from-[#a8875a] hover:to-[#c1a56b] text-[#0e0e0e] font-semibold",children:[e.jsx(y,{className:"w-5 h-5 mr-2"}),"New Note"]})]})}const A=["Flatiron","MidEast","Midtown","UWS","Back Bay","North Station","Miami Beach","eStore","Location 9","Location 10"];function E({note:h,onSave:b,onCancel:u,isAdmin:g,userLocation:j}){const[N,y]=x.useState({location:(null==h?void 0:h.location)||(g?"":j||"Flatiron"),date:(null==h?void 0:h.date)||w(new Date,"yyyy-MM-dd"),title:(null==h?void 0:h.title)||"",content:(null==h?void 0:h.content)||"",priority:(null==h?void 0:h.priority)||"medium",visible_until:(null==h?void 0:h.visible_until)||w(f(new Date,30),"yyyy-MM-dd")}),[M,_]=x.useState(!1);return e.jsxs(t,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[e.jsx(s,{children:e.jsxs(l,{className:"text-white flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-[#bc9a64]"}),h?"Edit Note":"Create New Note"]})}),e.jsx(i,{children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),_(!0),await b({...N,location:N.location}),_(!1)},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Location"}),e.jsxs(r,{value:N.location,onValueChange:e=>y(a=>({...a,location:e})),children:[e.jsx(n,{className:"bg-[#0e0e0e] border-[#333] text-white",children:e.jsx(c,{placeholder:"Select location"})}),e.jsx(o,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:A.map(a=>e.jsx(d,{value:a,className:"text-white hover:bg-[#bc9a64]/10",children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Date"}),e.jsx(m,{type:"date",value:N.date,onChange:e=>y(a=>({...a,date:e.target.value})),className:"bg-[#0e0e0e] border-[#333] text-white focus:border-[#bc9a64]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Priority"}),e.jsxs(r,{value:N.priority,onValueChange:e=>y(a=>({...a,priority:e})),children:[e.jsx(n,{className:"bg-[#0e0e0e] border-[#333] text-white",children:e.jsx(c,{})}),e.jsxs(o,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[e.jsx(d,{value:"low",className:"text-white hover:bg-[#bc9a64]/10",children:"Low Priority"}),e.jsx(d,{value:"medium",className:"text-white hover:bg-[#bc9a64]/10",children:"Medium Priority"}),e.jsx(d,{value:"high",className:"text-white hover:bg-[#bc9a64]/10",children:"High Priority"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Visible Until"}),e.jsx(m,{type:"date",value:N.visible_until,onChange:e=>y(a=>({...a,visible_until:e.target.value})),className:"bg-[#0e0e0e] border-[#333] text-white focus:border-[#bc9a64]"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Title"}),e.jsx(m,{value:N.title,onChange:e=>y(a=>({...a,title:e.target.value})),className:"bg-[#0e0e0e] border-[#333] text-white focus:border-[#bc9a64]",placeholder:"Enter note title...",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Content"}),e.jsx(k,{value:N.content,onChange:e=>y(a=>({...a,content:e.target.value})),className:"bg-[#0e0e0e] border-[#333] text-white focus:border-[#bc9a64] h-32",placeholder:"Write your note content here...",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsxs(a,{type:"button",variant:"outline",onClick:u,className:"border-[#333] text-gray-300 hover:bg-[#333]/50",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(a,{type:"submit",disabled:M||!g&&!j,className:"bg-gradient-to-r from-[#bc9a64] to-[#d4b876] hover:from-[#a8875a] hover:to-[#c1a56b] text-[#0e0e0e] font-semibold",children:[M?e.jsx("div",{className:"w-4 h-4 border-2 border-[#0e0e0e] border-t-transparent rounded-full animate-spin mr-2"}):e.jsx(C,{className:"w-4 h-4 mr-2"}),h?"Update":"Create"," Note"]})]})]})})]})}function R({notes:s,onEdit:l,onDelete:r,showLocation:n=!1}){const c=e=>{switch(e){case"high":return"bg-red-500/20 text-red-400 border-red-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"low":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return 0===s.length?e.jsx(t,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(v,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Notes Found"}),e.jsx("p",{className:"text-gray-400",children:"No notes match your current filters. Try adjusting your search criteria or create a new note."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(s=>{return e.jsx(t,{className:"bg-[#1a1a1a] border-[#bc9a64]/20 hover-lift",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{className:c(s.priority),children:[(o=s.priority,"high"===o?e.jsx(S,{className:"w-3 h-3"}):e.jsx(v,{className:"w-3 h-3"})),e.jsx("span",{className:"ml-1 capitalize",children:s.priority})]}),n&&e.jsxs(h,{variant:"outline",className:"text-gray-300 border-gray-600",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),s.location]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>l(s),className:"text-gray-400 hover:text-[#bc9a64] hover:bg-[#bc9a64]/10 h-8 w-8 p-0",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>r(s.id),className:"text-gray-400 hover:text-red-400 hover:bg-red-500/10 h-8 w-8 p-0",children:e.jsx(D,{className:"w-4 h-4"})})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-3 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-3",children:s.content}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),e.jsx("span",{children:s.created_date?w(new Date(s.created_date),"MMM d, yyyy"):"No date"})]}),s.visible_until&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Until:"}),e.jsx("span",{children:w(new Date(s.visible_until),"MMM d")})]})]})]})},s.id);var o})})}function V({filters:s,onFiltersChange:l,isAdmin:m,userLocation:x}){const h=(e,a)=>{l({...s,[e]:a})};return e.jsx(t,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-[#bc9a64]"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Filters:"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Location:"}),e.jsxs(r,{value:s.location,onValueChange:e=>h("location",e),children:[e.jsx(n,{className:"w-40 bg-[#0e0e0e] border-[#333] text-white",children:e.jsx(c,{})}),e.jsxs(o,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[e.jsx(d,{value:"all",className:"text-white hover:bg-[#bc9a64]/10",children:"All Locations"}),b.map(a=>e.jsx(d,{value:a,className:"text-white hover:bg-[#bc9a64]/10",children:a},a))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Priority:"}),e.jsxs(r,{value:s.priority,onValueChange:e=>h("priority",e),children:[e.jsx(n,{className:"w-32 bg-[#0e0e0e] border-[#333] text-white",children:e.jsx(c,{})}),e.jsxs(o,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[e.jsx(d,{value:"all",className:"text-white hover:bg-[#bc9a64]/10",children:"All"}),e.jsx(d,{value:"high",className:"text-white hover:bg-[#bc9a64]/10",children:"High"}),e.jsx(d,{value:"medium",className:"text-white hover:bg-[#bc9a64]/10",children:"Medium"}),e.jsx(d,{value:"low",className:"text-white hover:bg-[#bc9a64]/10",children:"Low"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Date:"}),e.jsxs(r,{value:s.dateRange,onValueChange:e=>h("dateRange",e),children:[e.jsx(n,{className:"w-32 bg-[#0e0e0e] border-[#333] text-white",children:e.jsx(c,{})}),e.jsxs(o,{className:"bg-[#1a1a1a] border-[#bc9a64]/20",children:[e.jsx(d,{value:"all",className:"text-white hover:bg-[#bc9a64]/10",children:"All Time"}),e.jsx(d,{value:"today",className:"text-white hover:bg-[#bc9a64]/10",children:"Today"}),e.jsx(d,{value:"week",className:"text-white hover:bg-[#bc9a64]/10",children:"This Week"}),e.jsx(d,{value:"month",className:"text-white hover:bg-[#bc9a64]/10",children:"This Month"})]})]})]}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>l({location:m?"all":x,priority:"all",dateRange:"all"}),className:"border-[#bc9a64]/20 text-gray-300 hover:bg-[#bc9a64]/10",children:"Clear"})]})})})}function B(){const[a,t]=x.useState([]),[s,l]=x.useState(!0),[i,r]=x.useState(!1),[n,c]=x.useState(null),[o,d]=x.useState({location:"all",priority:"all",dateRange:"all"}),{user:m,loading:h}=u();x.useEffect(()=>{m&&b()},[m]);const b=async()=>{if(m){l(!0);try{const e=await g.list(),a=new Date,s=e.filter(e=>!(e.visible_until&&new Date(e.visible_until)<a)&&!(!m.is_admin&&e.location!==(m.location||"Flatiron"))).sort((e,a)=>new Date(a.created_date||0).getTime()-new Date(e.created_date||0).getTime());t(s)}catch(e){j.error("Error loading notes data",e)}l(!1)}},v=a.filter(e=>{if("all"!==o.location&&e.location!==o.location)return!1;if("all"!==o.priority&&e.priority!==o.priority)return!1;if("all"!==o.dateRange){const a=new Date(e.created_date||0),t=new Date;switch(o.dateRange){case"today":if(w(a,"yyyy-MM-dd")!==w(t,"yyyy-MM-dd"))return!1;break;case"week":if(a<new Date(t.getTime()-6048e5))return!1;break;case"month":if(a<new Date(t.getTime()-2592e6))return!1}}return!0});return h||s?e.jsx("div",{className:"min-h-screen bg-[#0e0e0e] flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#bc9a64] border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"min-h-screen bg-[#0e0e0e] text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx(T,{isAdmin:null==m?void 0:m.is_admin,userLocation:(null==m?void 0:m.location)||"Flatiron",onNewNote:()=>r(!0)}),e.jsx(V,{filters:o,onFiltersChange:d,isAdmin:null==m?void 0:m.is_admin,userLocation:(null==m?void 0:m.location)||"Flatiron"}),i&&e.jsx(E,{note:n||void 0,onSave:async e=>{try{if(n){const a={...n};await g.update(n.id,e),await N.logNote("update",n.id,a,e)}else{(null==m?void 0:m.is_admin)||(e.location=(null==m?void 0:m.location)||"Flatiron");const a=await g.create(e);await N.logNote("create",a.id,null,e)}r(!1),c(null),await b()}catch(a){j.error("Error saving note",a)}},onCancel:()=>{r(!1),c(null)},isAdmin:(null==m?void 0:m.is_admin)||!1,userLocation:(null==m?void 0:m.location)||"Flatiron"}),e.jsx(R,{notes:v,onEdit:e=>{c(e),r(!0)},onDelete:async e=>{if(window.confirm("Are you sure you want to delete this note?"))try{const t=a.find(a=>a.id===e);await g.delete(e),await N.logNote("delete",e,t,null),await b()}catch(t){j.error("Error deleting note",t)}},showLocation:null==m?void 0:m.is_admin})]})})}export{B as default};
//# sourceMappingURL=Notes-f03def7e.js.map
