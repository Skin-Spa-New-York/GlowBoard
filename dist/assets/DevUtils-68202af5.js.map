{"version":3,"file":"DevUtils-68202af5.js","sources":["../../src/components/Utils/AdminSetup.tsx","../../src/pages/DevUtils.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { UserEntity } from \"@/services/entities\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\ninterface AdminSetupProps {\n  onClose?: () => void;\n}\n\nexport function AdminSetup({ onClose }: AdminSetupProps) {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handlePromoteToAdmin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!email.trim()) {\n      setError(\"Please enter an email address\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n    setMessage(\"\");\n\n    try {\n      await UserEntity.promoteToAdmin(email.trim());\n      setMessage(`Successfully promoted ${email} to admin`);\n      setEmail(\"\");\n\n      // Auto-close after success\n      setTimeout(() => {\n        onClose?.();\n      }, 2000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Failed to promote user\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-md mx-auto\">\n      <CardHeader>\n        <CardTitle className=\"text-center\">Admin Setup</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handlePromoteToAdmin} className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium mb-2\">\n              Email Address\n            </label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"user@example.com\"\n              disabled={loading}\n            />\n          </div>\n\n          {error && (\n            <div className=\"text-red-500 text-sm bg-red-50 p-2 rounded\">\n              {error}\n            </div>\n          )}\n\n          {message && (\n            <div className=\"text-green-500 text-sm bg-green-50 p-2 rounded\">\n              {message}\n            </div>\n          )}\n\n          <div className=\"flex gap-2\">\n            <Button type=\"submit\" disabled={loading} className=\"flex-1\">\n              {loading ? \"Promoting...\" : \"Promote to Admin\"}\n            </Button>\n\n            {onClose && (\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                disabled={loading}\n              >\n                Cancel\n              </Button>\n            )}\n          </div>\n        </form>\n\n        <div className=\"mt-4 text-xs text-gray-500\">\n          <p>\n            <strong>Note:</strong> The first user to sign up is automatically\n            made an admin. Use this form only for emergency admin promotion.\n          </p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","import { useState } from \"react\";\nimport { AdminSetup } from \"@/components/Utils/AdminSetup\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function DevUtils() {\n  const { user, isAdmin } = useAuth();\n  const [showAdminSetup, setShowAdminSetup] = useState(false);\n\n  // Only show in development or to admins\n  const isDevelopment = process.env.NODE_ENV === \"development\";\n\n  if (!isDevelopment && !isAdmin) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <h1 className=\"text-2xl font-bold mb-4\">Access Denied</h1>\n            <p>\n              This page is only available in development mode or to\n              administrators.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Development Utilities</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <h3 className=\"font-semibold\">Current User Info</h3>\n              <div className=\"text-sm space-y-1\">\n                <p>\n                  <strong>Email:</strong> {user?.email || \"Not logged in\"}\n                </p>\n                <p>\n                  <strong>Name:</strong> {user?.full_name || \"N/A\"}\n                </p>\n                <p>\n                  <strong>Location:</strong> {user?.location || \"N/A\"}\n                </p>\n                <p>\n                  <strong>Admin:</strong> {isAdmin ? \"Yes\" : \"No\"}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <h3 className=\"font-semibold\">Admin Management</h3>\n              <Button\n                onClick={() => setShowAdminSetup(true)}\n                variant=\"outline\"\n                size=\"sm\"\n              >\n                Promote User to Admin\n              </Button>\n            </div>\n          </div>\n\n          {showAdminSetup && (\n            <div className=\"mt-6\">\n              <AdminSetup onClose={() => setShowAdminSetup(false)} />\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>First User Admin Setup</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <p className=\"text-sm text-gray-600\">\n              The system automatically makes the first user to sign up an\n              administrator. This ensures there's always at least one admin who\n              can manage other users.\n            </p>\n\n            <div className=\"bg-blue-50 p-4 rounded-lg\">\n              <h4 className=\"font-semibold text-blue-900 mb-2\">\n                How it works:\n              </h4>\n              <ul className=\"text-sm text-blue-800 space-y-1\">\n                <li>\n                  • When a user signs up, the system checks if any users exist\n                </li>\n                <li>\n                  • If no users exist, the new user is automatically made an\n                  admin\n                </li>\n                <li>• Subsequent users are created as regular users</li>\n                <li>\n                  • Admins can promote other users through User Management\n                </li>\n              </ul>\n            </div>\n\n            <div className=\"bg-yellow-50 p-4 rounded-lg\">\n              <h4 className=\"font-semibold text-yellow-900 mb-2\">\n                Emergency Admin Promotion:\n              </h4>\n              <p className=\"text-sm text-yellow-800\">\n                If you need to manually promote a user to admin (e.g., for\n                testing), use the \"Promote User to Admin\" button above. This\n                should only be used in development or emergency situations.\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":["AdminSetup","onClose","email","setEmail","useState","loading","setLoading","message","setMessage","error","setError","jsxs","Card","className","children","jsx","CardHeader","jsxRuntimeExports","CardTitle","CardContent","onSubmit","async","e","preventDefault","trim","UserEntity","promoteToAdmin","setTimeout","err","Error","htmlFor","Input","id","type","value","onChange","target","placeholder","disabled","Button","variant","onClick","DevUtils","user","isAdmin","useAuth","showAdminSetup","setShowAdminSetup","full_name","location","size"],"mappings":"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"}