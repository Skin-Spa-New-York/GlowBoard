import{j as e,C as s,d as a,e as i,b as t,I as l,B as n}from"./dashboard-features-d9d15042.js";import{r}from"./react-vendor-b18ea2cb.js";import{U as d,u as o}from"./admin-features-fcd29654.js";import"./ui-vendor-ea3e37df.js";import"./charts-vendor-c49a018f.js";import"./firebase-vendor-b3492e98.js";function m({onClose:o}){const[m,c]=r.useState(""),[x,h]=r.useState(!1),[u,j]=r.useState(""),[p,g]=r.useState("");return e.jsxs(s,{className:"w-full max-w-md mx-auto",children:[e.jsx(a,{children:e.jsx(i,{className:"text-center",children:"Admin Setup"})}),e.jsxs(t,{children:[e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),m.trim()){h(!0),g(""),j("");try{await d.promoteToAdmin(m.trim()),j(`Successfully promoted ${m} to admin`),c(""),setTimeout(()=>{null==o||o()},2e3)}catch(s){g(s instanceof Error?s.message:"Failed to promote user")}finally{h(!1)}}else g("Please enter an email address")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email Address"}),e.jsx(l,{id:"email",type:"email",value:m,onChange:e=>c(e.target.value),placeholder:"user@example.com",disabled:x})]}),p&&e.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-2 rounded",children:p}),u&&e.jsx("div",{className:"text-green-500 text-sm bg-green-50 p-2 rounded",children:u}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:"submit",disabled:x,className:"flex-1",children:x?"Promoting...":"Promote to Admin"}),o&&e.jsx(n,{type:"button",variant:"outline",onClick:o,disabled:x,children:"Cancel"})]})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-500",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," The first user to sign up is automatically made an admin. Use this form only for emergency admin promotion."]})})]})]})}function c(){const{user:l,isAdmin:d}=o(),[c,x]=r.useState(!1);return d?e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(i,{children:"Development Utilities"})}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Current User Info"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",(null==l?void 0:l.email)||"Not logged in"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",(null==l?void 0:l.full_name)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",(null==l?void 0:l.location)||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Admin:"})," ",d?"Yes":"No"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Admin Management"}),e.jsx(n,{onClick:()=>x(!0),variant:"outline",size:"sm",children:"Promote User to Admin"})]})]}),c&&e.jsx("div",{className:"mt-6",children:e.jsx(m,{onClose:()=>x(!1)})})]})]}),e.jsxs(s,{children:[e.jsx(a,{children:e.jsx(i,{children:"First User Admin Setup"})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"The system automatically makes the first user to sign up an administrator. This ensures there's always at least one admin who can manage other users."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"How it works:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• When a user signs up, the system checks if any users exist"}),e.jsx("li",{children:"• If no users exist, the new user is automatically made an admin"}),e.jsx("li",{children:"• Subsequent users are created as regular users"}),e.jsx("li",{children:"• Admins can promote other users through User Management"})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Emergency Admin Promotion:"}),e.jsx("p",{className:"text-sm text-yellow-800",children:'If you need to manually promote a user to admin (e.g., for testing), use the "Promote User to Admin" button above. This should only be used in development or emergency situations.'})]})]})})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(s,{children:e.jsxs(t,{className:"p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{children:"This page is only available in development mode or to administrators."})]})})})}export{c as default};
//# sourceMappingURL=DevUtils-68202af5.js.map
